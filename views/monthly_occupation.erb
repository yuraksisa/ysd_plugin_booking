<style>
#table {
  table-layout: fixed
}
 #table .table-cell {
   border-right: 1px solid #EEE;
   width: 1.5em;
   font-size: 0.7em;
 }
</style>
<div class="top-navigation-bar">
<h2 class="entity-title">Ocupaci√≥n mensual</h2>
</div>
<div class="top-margin bottom-margin-1line">
	<div class="more_contrast_text centered_text top-margin-1line bottom-margin-2lines">
		<span id="prev" class="all-space over_cursor background-color-2 color-2 all-border-solid"><a href="?month=<%=@previous_period.month%>&year=<%=@previous_period.year%>">&lt;</a></span>
		<span class="all-space">
		  <span id="month" class="left-margin"><%=@month%></span> - <span id="year" class="right-margin"><%=@year%></span>
	    </span>
		<span id="next" class="all-space over_cursor background-color-2 color-2 all-border-solid"><a href="?month=<%=@next_period.month%>&year=<%=@next_period.year%>">&gt;</a></span>
	</div>
</div>
<div class="admin_content_wrapper">
  <div>
    <table id="table" class="table">
      <thead class="table-header">
        <tr>
          <th class="table-cell" scope="col" style="width: 80px"></th>
          <% (1..@days).each do |day| %>
          <th class="table-cell centered_text" scope="col"><%=day%></th>
          <% end %>     
        </tr>
      </thead>
      <tbody>
        <% @data.each do |product, occupation| %>        
        <tr>
          <td class="table-cell"><%= product %></td>
          <% occupation.each do |day, value| %>
            <% percentage = eval(value) * 100 %>
            <td class="table-cell centered_text" <% if percentage >= 100 %>style="background:red; color: white"<%elsif percentage >= 75 and !percentage.infinite?%>style="background:orange"<%elsif percentage > 0 and !percentage.infinite?%>style="background:yellow"<%end%>><%= (percentage.nan? or percentage.infinite?) ? "-" : "#{("%.0f" % percentage)}%" %></td>
          <% end %>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>