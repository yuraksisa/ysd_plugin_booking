<%= partial 'booking_planning.js'.to_sym %>

require(['jquery', 'jquery.ui', 'jquery.ui.datepicker-es', 
         'jquery.ui.datepicker.validation','jquery.formparams', 'datejs'], 
        function($) {

  planningModel = {

    month: new Date().getMonth()+1,
    year: new Date().getFullYear(),

    init: function() {
      <% if @date_from and @date_to %>
      this.dateFrom = new Date('<%=@date_from.strftime("%Y-%m-%d")%>');
      this.dateTo = new Date('<%=@date_to.strftime("%Y-%m-%d")%>');
      <% else %>
      this.dateFrom = new Date(this.year, this.month-1, 1);
      this.dateTo = new Date(this.year, this.month, 0);
      <% end %>
    } 
  }

  planningController = {

  } 

  planningView = {
 
    init: function() {
      bookingPlanningModel.dateFrom = planningModel.dateFrom;
      bookingPlanningModel.dateTo = planningModel.dateTo;
  	  bookingPlanningView.init();
    }

  }

  planningModel.init();
  planningView.init();
});