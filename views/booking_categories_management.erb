<%= include('entity-management') %>

<!-- Renders the element description -->
<script type="text/tmpl" id="elements_title">
  <h2 class="entity-title"><%=t.booking_category_management.form.title%></h2> 
</script>

<!-- Renders the element description -->
<script type="text/tmpl" id="elements_description">
</script>

<!-- Renders the elements container -->
<script type="text/tmpl" id="elements_container_template">
  <table id="elements_table" class="table">
     <thead class="table-header">
       <tr>
         <th class="table-header-title" scope="col" style="width:30%">
           <%= t.booking_category_management.form.code.label %>
         </th>
         <th class="table-header-title" scope="col" style="width:30%">
           <%= t.booking_category_management.form.name.label %>
         </th>
         <th class="table-header-title" scope="col" style="width:40%">
         </th>
       </tr>
     </thead>
     <tbody id="elements_tbody" class="table-tbody">             
     </tbody>
  </table>
</script>

<!-- Renders one element in the elements list view -->
        
<script type="text/tmpl" id="elements_list_template">
    <tr class="table-row" id="element_row_<%%=index%>">
      <td class="table-cell element-navigation-detail" rel="<%%= index %>">
        <%%= entity.code %>
      </td>
      <td class="table-cell element-navigation-detail" rel="<%%= index %>">
        <%%= entity.name %>
      </td>
      <td class="table-cell">
           <%% if (entity.calendar_id && entity.calendar_id != null) { %>
                <div class="form-button green-white-button"><a href="/admin/calendar/events/<%%=entity.calendar_id%>">
                  <%=t.booking_category_management.table.calendar%>
                </a></div>
           <%% } %>

           <%% if (entity.price_definition_id && entity.price_definition_id != null) { %>
                <div class="form-button green-white-button"><a href="/admin/rates/prices/<%%=entity.price_definition_id%>">
                  <%=t.booking_category_management.table.prices%>
                </a></div>
           <%% } %>
      </td>
    </tr>
</script>

<!-- Renders one element in the element view (full detailed) -->

<script type="text/tmpl" id="element_template">
   
</script>

<!-- Renders the form to edit an element -->

<script type="text/tmpl" id="element_template_form">
              
     <form name="element" method="POST">
        <div class="form-fields">
                                   
          <div class="container_12"> 
            <div class="grid_6">
              <div class="formrow">
                <label class="fieldtitle"><%= t.booking_category_management.form.code.label %></label>
                <input type="text" maxlength="20" id="code" name="code" class="fieldcontrol" <%% if (entity) {%> value="<%%=entity.code %>" <%% } %>/>
              </div>
              <div class="formrow">
                <label class="fieldtitle"><%= t.booking_category_management.form.name.label %></label>
                <input type="text" maxlength="80" id="name" name="name" class="fieldcontrol" <%% if (entity) { %> value="<%%=entity.name%>" <%% } %>/>
              </div> 
              <div class="formrow">
                <label class="fieldtitle"><%= t.booking_category_management.form.short_description.label %></label>
                <input type="text" maxlength="80" id="short_description" name="short_description" class="fieldcontrol" <%% if (entity) { %> value="<%%=entity.short_description%>" <%% } %>/>
              </div>                            
              <div class="formrow">
                 <label class="fieldtitle"><%= t.booking_category_management.form.description.label %></label>
                 <textarea rows="5" cols="50" id="description" name="description" class="fieldcontrol texteditor"><%% if (entity) {%><%%=entity.description %><%% } %></textarea>
              </div>
            </div>
            <div class="grid_6">  
              <div class="left-margin">
              <div class="formrow">
                <label class="fieldtitle"><%= t.booking_category_management.form.type.label %></label>
                <select class="fieldcontrol" name="type" id="type"/>
              </div>
              <div class="formrow">
                <label class="fieldtitle"><%= t.booking_category_management.form.stock_control.label%></label>
                <input type="checkbox" name="stock_control" value="true" id="stock_control" <%% if (entity && entity.stock_control) { %>checked="checked"<%%}%>/>
              </div>                         
              <div id="stock_container" class="formrow" <%% if (entity == null || (entity && entity.stock_control == false)){%>style="display:none"<%%}%>}>
                <label class="fieldtitle"><%= t.booking_category_management.form.stock.label%></label>
                <input type="text" name="stock" id="stock" <%% if (entity){%>value="<%%=entity.stock%>" <%%}%>/>
              </div>
              <div class="formrow">
                <label class="fieldtitle"><%= t.booking_category_management.form.sort_order.label%></label>
                <input type="text" name="sort_order" id="sort_order" <%% if (entity){%>value="<%%=entity.sort_order%>" <%%}%>/>
              </div>                 
              <div class="formrow">
                <label class="fieldtitle"><%= t.booking_category_management.form.catalog.label %></label>
                <select class="fieldcontrol" name="booking_catalog[code]" id="booking_catalog[code]"/>
              </div>   
              <div class="formrow">
                <label class="fieldtitle"><%= t.booking_category_management.form.calendar.label %></label>
                <select class="fieldcontrol" name="calendar[id]" id="calendar[id]"/>
              </div>     
              <%% if (!entity) { %>
              <div class="formrow">
                <input type="checkbox" id="create_category_calendar">Crear calendario</input>
              </div>
              <%% } %> 
              <div class="formrow bottom-space">
                <label class="fieldtitle"><%= t.booking_category_management.form.price_definition.label %></label>
                <select class="fieldcontrol" name="price_definition[id]" id="price_definition[id]"/>
              </div>                           
              <%% if (!entity) { %>
              <div class="formrow">
                <input type="checkbox" id="create_category_price">Crear precio</input>
              </div>
              <div id="category_price" class="element-form-detail" style="display:none">
                <%= partial(:price_definition_creation)%>
              </div>
              <%% } %> 

              <%= include('entity-tabs-above', {:edit_element_form_above => edit_element_form_above,
                                            :edit_element_form_above_ingroup_tab => edit_element_form_above_ingroup_tab,
                                            :edit_element_form_above_ingroup => edit_element_form_above_ingroup,
                                            :new_element_form_above => new_element_form_above,
                                            :new_element_form_above_ingroup_tab => new_element_form_above_ingroup_tab,
                                            :new_element_form_above_ingroup => new_element_form_above_ingroup}) %>

              <%= include('entity-tabs-below', {:edit_element_form => edit_element_form,
                                            :edit_element_form_ingroup_tab => edit_element_form_ingroup_tab,
                                            :edit_element_form_ingroup => edit_element_form_ingroup,
                                            :new_element_form => new_element_form,
                                            :new_element_form_ingroup_tab => new_element_form_ingroup_tab,
                                            :new_element_form_ingroup => new_element_form_ingroup}) %>
            </div>
            </div>
          </div> 
                        
        </div>
                       
        <div class="bottom-navigation-bar navigation-bar">
             <div class="navigation-bar-crud-buttons">
                <%% if (entity) { %>
                  <input type="button" class="update-entity-button action-button entity-management-button" value="<%=t.entitymanagement.update%>"/>
                <%% } 
                   else { %>
                  <input type="submit" class="create-entity-button action-button entity-management-button" value="<%=t.entitymanagement.create%>"/>
                <%% } %>
             </div>
        </div>
     
     </form>
     
</script>

<%= element_form_extension if defined?element_form_extension %>
<%= element_extension if defined?element_extension %>
<%= element_action_extension if defined?element_action_extension %>
